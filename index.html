<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Marketing Playbook – Stage</title>

  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="./assets/favicon.ico" />
</head>

<body>
  <div class="stage-wrapper">
    <!-- Permanent outline/base layer -->
    <div class="stage-outline"></div>

    <!-- Swappable color layer (starts Normal via CSS) -->
    <div class="stage-color" id="stageColor"></div>

    <!-- Theater blackout overlay -->
    <div class="blackout" id="blackout"></div>

    <nav class="mini-nav" aria-label="Quick navigation">
         <a href="analytics.html">Analytics</a>
         <a href="strategy.html">Strategy</a>
         <a href="portfolio.html">Portfolio</a>
         <a href="about.html">About</a>
         <button class="mini-nav-btn" id="openWelcome" type="button">Guide</button>
    </nav>

            <!-- Welcome panel (shows on load; can be closed) -->
    <div class="welcome-choice-box">
        <button
            class="welcome-choice-close"
            id="closeWelcome"
            type="button"
            aria-label="Close"
        >
            ×
        </button>

        <div class="welcome-choice">
            <!-- Stage experience -->
            <button
                class="welcome-option primary"
                id="enterStage"
                type="button"
            >
                <span class="option-title">Take me to the stage</span>
                <span class="option-sub">Interactive, visual experience</span>
                <span class="option-arrow">→</span>
            </button>

            <!-- Traditional site -->
            <a
                class="welcome-option secondary"
                href="simple.html"
            >
                <span class="option-title">My traditional website</span>
                <span class="option-sub">Clean, straightforward layout</span>
            </a>
        </div>
    </div>

    <p class="welcome-hint">
        Tip: Use the switchboard below to explore, or the top-right links to jump directly.
    </p>


    <!-- Floating center asset (starts hidden) -->
    <div class="center-anchor" id="centerAnchor" aria-hidden="true" style="display:none;">
      <div class="center-float">
        <div class="center-revolve">
          <!-- Make this a button so it’s clickable and accessible -->
          <button class="center-click" id="centerClick" type="button">
            <img
              id="centerAsset"
              src=""
              alt=""
            />
          </button>
        </div>
      </div>
    </div>

<!-- Switchboard -->
<div class="switchboard" id="switchboard">
  <!-- Analytics -->
  <button
    class="switch analytics"
    type="button"
    aria-label="analytics"
    data-label="analytics"
    data-stage="Purple_Stage.png"
    data-center="analytics_stage.png"
    data-link="analytics.html"
    data-board="board_analytics.png"
  ></button>

  <!-- Strategy -->
  <button
    class="switch strategy"
    type="button"
    aria-label="strategy"
    data-label="strategy"
    data-stage="Green_Stage.png"
    data-center="strategy.png"
    data-link="strategy.html"
    data-board="board_strategy.png"
  ></button>

  <!-- Portfolio -->
  <button
    class="switch portfolio"
    type="button"
    aria-label="portfolio"
    data-label="portfolio"
    data-stage="Gold_Stage.png"
    data-center="portfolio.png"
    data-link="portfolio.html"
    data-board="board_portfolio.png"
  ></button>

  <!-- About Me -->
  <button
    class="switch about"
    type="button"
    aria-label="about"
    data-label="about"
    data-stage="Cyan_Stage.png"
    data-center="headshot_stage.png"
    data-link="about.html"
    data-board="board_about.png"
  ></button>
</div>


  <script>
  const stageColor = document.getElementById("stageColor");
  const blackout = document.getElementById("blackout");
  const switchboard = document.getElementById("switchboard");

  const centerAnchor = document.getElementById("centerAnchor");
  const centerClick = document.getElementById("centerClick");
  const centerAsset = document.getElementById("centerAsset");

  const switches = document.querySelectorAll(".switch");

  const welcome = document.getElementById("welcome");
  const closeWelcome = document.getElementById("closeWelcome");
  const openWelcome = document.getElementById("openWelcome");
  const welcomeJumps = document.querySelectorAll(".welcome-jump");


  // Where should the center asset click go?
  let activeLink = null;

  function hideCenterAsset() {
    centerAnchor.style.display = "none";
    centerAnchor.setAttribute("aria-hidden", "true");
    centerAsset.src = "";
    centerAsset.alt = "";
    activeLink = null;
  }

  function showWelcome() {
    if (!welcome) return;
    welcome.style.display = "flex";
  }

  function hideWelcome() {
    if (!welcome) return;
    welcome.style.display = "none";
  }


  function showCenterAsset(centerFile, label, link) {
    centerAnchor.style.display = "block";
    centerAnchor.setAttribute("aria-hidden", "false");

  // reset any previous sizing class
    centerAsset.className = "";

    centerAsset.src = `./assets/${centerFile}`;
    centerAsset.alt = label ? `${label}` : "Selected";

  // make Analytics logo smaller only
    if (label === "analytics") {
        centerAsset.classList.add("is-analytics");
    }

    activeLink = link || null;
}


  // 1) fade to black
  // 2) swap stage + board + center while black
  // 3) fade back in
  function transitionTo({ stageFile, centerFile, boardFile, label, link }) {
    // lock switches during transition
    switches.forEach((btn) => (btn.disabled = true));

    blackout.classList.add("is-on");

    setTimeout(() => {
      // stage color
      if (stageFile) {
        stageColor.style.backgroundImage = `url("./assets/${stageFile}")`;
      }

      // switchboard image
      if (boardFile && switchboard) {
        switchboard.style.backgroundImage = `url("./assets/${boardFile}")`;
      }

      // center asset
      if (centerFile) {
        showCenterAsset(centerFile, label, link);
      } else {
        hideCenterAsset();
      }

      // fade back to scene
      blackout.classList.remove("is-on");

      // unlock switches shortly after
      setTimeout(() => {
        switches.forEach((btn) => (btn.disabled = false));
      }, 200);
    }, 180);
  }

  // Initial state: no floating asset visible
  hideCenterAsset();

  // Switch click
  switches.forEach((sw) => {
    sw.addEventListener("click", () => {
      transitionTo({
        stageFile: sw.dataset.stage || null,
        centerFile: sw.dataset.center || null,
        boardFile: sw.dataset.board || null,
        label: sw.dataset.label || "",
        link: sw.dataset.link || null,
      });
    });
  });

  // Floating asset click navigates to selected page
  centerClick.addEventListener("click", () => {
    if (!activeLink) return;
    window.location.href = activeLink;
  });
  
  // Welcome close/open
  closeWelcome?.addEventListener("click", hideWelcome);
  openWelcome?.addEventListener("click", showWelcome);

  // Jump buttons trigger the same transition, then close the welcome
  welcomeJumps.forEach((btn) => {
    btn.addEventListener("click", () => {
      transitionTo({
        stageFile: btn.dataset.stage || null,
        centerFile: btn.dataset.center || null,
        boardFile: btn.dataset.board || null,
        label: btn.dataset.label || "",
        link: btn.dataset.link || null,
      });
      hideWelcome();
    });
  });

  const enterStage = document.getElementById("enterStage");

  enterStage?.addEventListener("click", () => {
    hideWelcome();
  });

  
</script>

</body>
</html>

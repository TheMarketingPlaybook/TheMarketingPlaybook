<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Marketing Playbook – Stage</title>

  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="./assets/favicon.ico" />
</head>

<body>
  <div class="stage-wrapper">
    <!-- Permanent outline/base layer -->
    <div class="stage-outline"></div>

    <!-- Swappable color layer (starts Normal via CSS) -->
    <div class="stage-color" id="stageColor"></div>

    <!-- Theater blackout overlay -->
    <div class="blackout" id="blackout"></div>

    <!-- Floating center asset (starts hidden) -->
    <div class="center-anchor" id="centerAnchor" aria-hidden="true" style="display:none;">
      <div class="center-float">
        <div class="center-revolve">
          <!-- Make this a button so it’s clickable and accessible -->
          <button class="center-click" id="centerClick" type="button">
            <img
              id="centerAsset"
              src=""
              alt=""
            />
          </button>
        </div>
      </div>
    </div>

<!-- Switchboard -->
<div class="switchboard" id="switchboard">
  <!-- Analytics -->
  <button
    class="switch analytics"
    type="button"
    aria-label="analytics"
    data-label="analytics"
    data-stage="Purple_Stage.png"
    data-center="analytics_stage.png"
    data-link="analytics.html"
    data-board="board_analytics.png"
  ></button>

  <!-- Strategy -->
  <button
    class="switch strategy"
    type="button"
    aria-label="strategy"
    data-label="strategy"
    data-stage="Green_Stage.png"
    data-center="strategy.png"
    data-link="strategy.html"
    data-board="board_strategy.png"
  ></button>

  <!-- Portfolio -->
  <button
    class="switch portfolio"
    type="button"
    aria-label="portfolio"
    data-label="portfolio"
    data-stage="Gold_Stage.png"
    data-center="portfolio.png"
    data-link="portfolio.html"
    data-board="board_portfolio.png"
  ></button>

  <!-- About Me -->
  <button
    class="switch about"
    type="button"
    aria-label="about"
    data-label="about"
    data-stage="Cyan_Stage.png"
    data-center="headshot_stage.png"
    data-link="about.html"
    data-board="board_about.png"
  ></button>
</div>


  <script>
  const stageColor = document.getElementById("stageColor");
  const blackout = document.getElementById("blackout");
  const switchboard = document.getElementById("switchboard");

  const centerAnchor = document.getElementById("centerAnchor");
  const centerClick = document.getElementById("centerClick");
  const centerAsset = document.getElementById("centerAsset");

  const switches = document.querySelectorAll(".switch");

  // Where should the center asset click go?
  let activeLink = null;

  function hideCenterAsset() {
    centerAnchor.style.display = "none";
    centerAnchor.setAttribute("aria-hidden", "true");
    centerAsset.src = "";
    centerAsset.alt = "";
    activeLink = null;
  }

  function showCenterAsset(centerFile, label, link) {
    centerAnchor.style.display = "block";
    centerAnchor.setAttribute("aria-hidden", "false");

  // reset any previous sizing class
    centerAsset.className = "";

    centerAsset.src = `./assets/${centerFile}`;
    centerAsset.alt = label ? `${label}` : "Selected";

  // make Analytics logo smaller only
    if (label === "analytics") {
        centerAsset.classList.add("is-analytics");
    }

    activeLink = link || null;
}


  // 1) fade to black
  // 2) swap stage + board + center while black
  // 3) fade back in
  function transitionTo({ stageFile, centerFile, boardFile, label, link }) {
    // lock switches during transition
    switches.forEach((btn) => (btn.disabled = true));

    blackout.classList.add("is-on");

    setTimeout(() => {
      // stage color
      if (stageFile) {
        stageColor.style.backgroundImage = `url("./assets/${stageFile}")`;
      }

      // switchboard image
      if (boardFile && switchboard) {
        switchboard.style.backgroundImage = `url("./assets/${boardFile}")`;
      }

      // center asset
      if (centerFile) {
        showCenterAsset(centerFile, label, link);
      } else {
        hideCenterAsset();
      }

      // fade back to scene
      blackout.classList.remove("is-on");

      // unlock switches shortly after
      setTimeout(() => {
        switches.forEach((btn) => (btn.disabled = false));
      }, 200);
    }, 180);
  }

  // Initial state: no floating asset visible
  hideCenterAsset();

  // Switch click
  switches.forEach((sw) => {
    sw.addEventListener("click", () => {
      transitionTo({
        stageFile: sw.dataset.stage || null,
        centerFile: sw.dataset.center || null,
        boardFile: sw.dataset.board || null,
        label: sw.dataset.label || "",
        link: sw.dataset.link || null,
      });
    });
  });

  // Floating asset click navigates to selected page
  centerClick.addEventListener("click", () => {
    if (!activeLink) return;
    window.location.href = activeLink;
  });
</script>

</body>
</html>
